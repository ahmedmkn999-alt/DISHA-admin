<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… | DISHA ADMIN</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background: #000; color: white; font-family: 'Cairo'; padding: 0; margin: 0; }
        
        /* Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #loginScreen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .login-box { text-align: center; width: 90%; max-width: 300px; }
        .login-input { width: 100%; padding: 15px; margin-bottom: 10px; border-radius: 5px; border: 1px solid #D4AF37; background: #111; color: white; font-size: 1.2rem; text-align: center; }
        
        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… */
        #dashboard { display: none; padding: 20px; max-width: 600px; margin: 0 auto; }
        
        input, select, button { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 5px; border: none; font-size: 1rem; box-sizing: border-box; }
        input, select { background: #222; color: white; border: 1px solid #444; }
        button { background: #D4AF37; color: black; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { background: #F4CF57; }
        
        .product-item { background: #151515; padding: 10px; margin-bottom: 10px; border-radius: 5px; border: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .del-btn { background: #c00; color: white; width: auto; padding: 5px 15px; margin: 0; }
        
        h2 { color: #D4AF37; border-bottom: 2px solid #D4AF37; padding-bottom: 10px; margin-top: 30px; }
        
        /* Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø³Ø­Ø±ÙŠ */
        .magic-btn { background: linear-gradient(45deg, #00c6ff, #0072ff); color: white; margin-bottom: 30px; border: 1px solid #fff; }
    </style>
</head>
<body>

    <div id="loginScreen">
        <div class="login-box">
            <h2 style="border:none;">ğŸ” DISHA ADMIN</h2>
            <input type="password" id="passInput" class="login-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
            <button onclick="checkPass()">Ø¯Ø®ÙˆÙ„</button>
        </div>
    </div>

    <div id="dashboard">
        <h3 style="text-align: center; color: #D4AF37;">Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© âš™ï¸</h3>
        
        <div style="background:#111; padding:15px; border:1px solid #333; border-radius:10px; margin-bottom:20px; text-align:center;">
            <h4 style="margin:0 0 10px 0; color:#00c6ff;">Ù†Ù‚Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©</h4>
            <p style="font-size:0.8rem; color:#ccc;">Ø¯ÙˆØ³ Ù‡Ù†Ø§ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ø´Ø§Ù† ØªØ±ÙØ¹ Ø§Ù„Ù€ 22 Ù…Ù†ØªØ¬ Ù„Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</p>
            <button class="magic-btn" onclick="importAll()" id="impBtn">ğŸš€ Ø§Ø³ØªÙŠØ±Ø§Ø¯ ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¢Ù†</button>
        </div>

        <h2>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h2>
        <input type="text" id="pName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
        <input type="number" id="pPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
        <input type="number" id="pOld" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù‚Ø¯ÙŠÙ…">
        <select id="pType">
            <option value="top">Ù‡ÙˆØ¯ÙŠ (Top)</option>
            <option value="bottom">Ø¨Ù†Ø·Ù„ÙˆÙ† (Bottom)</option>
            <option value="track">ØªØ±Ù†Ø¬ (Track)</option>
        </select>
        <input type="text" id="pImgF" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆØ´">
        <input type="text" id="pImgB" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„Ø¶Ù‡Ø±">
        <button id="addBtn">Ù†Ø´Ø±</button>

        <h2>ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (<span id="count">0</span>)</h2>
        <div id="productsList">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        <br>
        <button onclick="logout()" style="background:#c00; color:white;">Ø®Ø±ÙˆØ¬</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, orderBy, query } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAQuVtULU8APTurAmlkQ9gNyFG_N1Jvq48",
            authDomain: "disha-brand.firebaseapp.com",
            projectId: "disha-brand",
            storageBucket: "disha-brand.firebasestorage.app",
            messagingSenderId: "170505241014",
            appId: "1:170505241014:web:b3cbea5dcb06624e93c117",
            measurementId: "G-XL3C1JY6MF"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- Ø§Ù„Ø¯Ø§ØªØ§ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© (Ù…Ø®Ø²Ù†Ø© Ù‡Ù†Ø§ Ù…Ø¤Ù‚ØªØ§Ù‹ Ù„Ù„Ù†Ù‚Ù„) ---
        const oldData = [
            {n:'Hoodie Skull Black', p:600, o:750, t:'top', f:'https://i.postimg.cc/5tmyCWVq/ddf7ab69bd3b4107acc21fe160cecc8e.jpg', b:'https://i.postimg.cc/jjh27Ybc/6e9c779330a243aa9726ab1264d436b7.jpg'},
            {n:'Sweatshirt Basic White', p:650, o:800, t:'top', f:'https://i.postimg.cc/ydYdhp1j/81b107ef7281417dad506780ee8cdd5d.jpg', b:'https://i.postimg.cc/ydYdhp1j/81b107ef7281417dad506780ee8cdd5d.jpg'},
            {n:'Hoodie Graphic Off-White', p:600, o:750, t:'top', f:'https://i.postimg.cc/MGYHQJSD/913fce38965c45a6a297f01e01ddd50b.jpg', b:'https://i.postimg.cc/25xyZND0/acbeec02f32e4d6eb68a1c323fed0dda.jpg'},
            {n:'Sweatshirt Basic Grey', p:650, o:800, t:'top', f:'https://i.postimg.cc/0Q2QGXkf/c603bcbcda67413a83ebcffb745fd8d1.jpg', b:'https://i.postimg.cc/0Q2QGXkf/c603bcbcda67413a83ebcffb745fd8d1.jpg'},
            {n:'Sweatshirt Basic Black', p:650, o:800, t:'top', f:'https://i.postimg.cc/N0xFHvcb/ef64e6c8b8fe4c388e355eaf81ca510d.jpg', b:'https://i.postimg.cc/N0xFHvcb/ef64e6c8b8fe4c388e355eaf81ca510d.jpg'},
            {n:'Premium Sweatshirt Black', p:800, o:1000, t:'top', f:'https://i.postimg.cc/3w9pHvdY/fdf4556fed264436ad7d20d231c3c0ff.jpg', b:'https://i.postimg.cc/hjjm4t7H/b99d7c0aa746486eb9e54f8e1e309cef.jpg'},
            {n:'Hoodie Shine', p:600, o:750, t:'top', f:'https://i.postimg.cc/Xv0Xy5Qj/1000012716.jpg', b:'https://i.postimg.cc/GmR2gq4P/1000012717.jpg'},
            {n:'Tracksuit Full Set Black', p:900, o:1000, t:'track', f:'https://i.postimg.cc/TPhmfPmd/d42e2e329d3e4c049e3e0c887dce5463.jpg', b:'https://i.postimg.cc/TPhmfPmd/d42e2e329d3e4c049e3e0c887dce5463.jpg'},
            {n:'Tracksuit Full Set Grey', p:900, o:1000, t:'track', f:'https://i.postimg.cc/pdy8Rd8d/eccd0f68a93241ed84eda8827c2bba92.jpg', b:'https://i.postimg.cc/pdy8Rd8d/eccd0f68a93241ed84eda8827c2bba92.jpg'},
            {n:'High-End Sweatshirt Set', p:1300, o:1500, t:'track', f:'https://i.postimg.cc/bvdbpvbN/ff9b3cbaab694db8bcf404a4c3c63868.jpg', b:'https://i.postimg.cc/bvdbpvbN/ff9b3cbaab694db8bcf404a4c3c63868.jpg'},
            {n:'Premium Sweatshirt Set Beige', p:800, o:1000, t:'track', f:'https://i.postimg.cc/xdqHndH8/a31bad4a4c794a1ba0098a7fd72eb982.jpg', b:'https://i.postimg.cc/xdqHndH8/a31bad4a4c794a1ba0098a7fd72eb982.jpg'},
            {n:'Cargo Pants', p:700, o:800, t:'bottom', f:'https://i.postimg.cc/SK0qNTYx/69f03da0d15e42ce878cd7818fa0b75f.jpg', b:'https://i.postimg.cc/SK0qNTYx/69f03da0d15e42ce878cd7818fa0b75f.jpg'},
            {n:'Jeans Light Blue', p:600, o:750, t:'bottom', f:'https://i.postimg.cc/zByvgp1V/IMG_20260210_WA0023.jpg', b:'https://i.postimg.cc/j5D27vrD/IMG_20260210_WA0022.jpg'},
            {n:'Jeans Mod 1', p:600, o:750, t:'bottom', f:'https://i.postimg.cc/TPzMtcWZ/IMG_20260211_WA0000.jpg', b:'https://i.postimg.cc/TPzMtcWZ/IMG_20260211_WA0000.jpg'},
            {n:'Jeans Mod 2', p:600, o:750, t:'bottom', f:'https://i.postimg.cc/d0kcRfLP/IMG_20260211_WA0001.jpg', b:'https://i.postimg.cc/d0kcRfLP/IMG_20260211_WA0001.jpg'},
            {n:'Jeans Mod 3', p:600, o:750, t:'bottom', f:'https://i.postimg.cc/8C2QZbr3/IMG_20260211_WA0002.jpg', b:'https://i.postimg.cc/8C2QZbr3/IMG_20260211_WA0002.jpg'},
            {n:'Jeans Mod 4', p:600, o:750, t:'bottom', f:'https://i.postimg.cc/bv7cmR24/IMG_20260211_WA0003.jpg', b:'https://i.postimg.cc/bv7cmR24/IMG_20260211_WA0003.jpg'},
            {n:'Jeans Mod 5', p:600, o:750, t:'bottom', f:'https://i.postimg.cc/XJb1Z15q/IMG_20260211_WA0004.jpg', b:'https://i.postimg.cc/Kz2pKpTR/IMG_20260211_WA0005.jpg'}
        ];

        // ğŸ” Ø§Ù„Ø­Ù…Ø§ÙŠØ©
        window.checkPass = function() {
            if (document.getElementById('passInput').value === "0112838") {
                localStorage.setItem("dishaAdmin", "true");
                showDash();
            } else alert("ØºÙ„Ø·!");
        }
        function showDash() {
            document.getElementById('loginScreen').style.display='none';
            document.getElementById('dashboard').style.display='block';
            loadProducts();
        }
        if(localStorage.getItem("dishaAdmin")) showDash();
        window.logout = function() { localStorage.removeItem("dishaAdmin"); location.reload(); }

        // ğŸš€ Ø§Ù„Ø²Ø±Ø§Ø± Ø§Ù„Ø³Ø­Ø±ÙŠ (Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯)
        window.importAll = async () => {
            if(!confirm("Ø¬Ø§Ù‡Ø² ÙŠØ§ Ù‡Ù†Ø¯Ø³Ø©ØŸ Ù‡Ù†Ø±ÙØ¹ ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¯Ù„ÙˆÙ‚ØªÙŠ.. Ø¯ÙˆØ³ OK ÙˆØ§Ø³ØªÙ†Ù‰ Ø«ÙˆØ§Ù†ÙŠ")) return;
            
            const btn = document.getElementById('impBtn');
            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹... â³";
            btn.disabled = true;

            let count = 0;
            for (let item of oldData) {
                try {
                    await addDoc(collection(db, "products"), {
                        n: item.n, p: Number(item.p), o: Number(item.o), 
                        t: item.t, f: item.f, b: item.b || item.f,
                        date: Date.now() + count // Ø¹Ø´Ø§Ù† Ø§Ù„ØªØ±ØªÙŠØ¨
                    });
                    count++;
                } catch(e) { console.log(e); }
            }
            alert(`ØªÙ… Ø±ÙØ¹ ${count} Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰`);
            location.reload();
        }

        // â• Ø¥Ø¶Ø§ÙØ© ÙŠØ¯ÙˆÙŠ
        document.getElementById('addBtn').addEventListener('click', async () => {
            const n = document.getElementById('pName').value;
            const p = document.getElementById('pPrice').value;
            // Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...
            const t = document.getElementById('pType').value;
            const f = document.getElementById('pImgF').value;
            const b = document.getElementById('pImgB').value;
            
            if(!n || !p || !f) { alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!"); return; }
            await addDoc(collection(db, "products"), {
                n, p:Number(p), o:Number(document.getElementById('pOld').value||0), t, f, b:b||f, date: Date.now()
            });
            alert("ØªÙ…!"); loadProducts();
        });

        // ğŸ“‹ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
        async function loadProducts() {
            const q = query(collection(db, "products"), orderBy("date", "desc"));
            const snap = await getDocs(q);
            const list = document.getElementById('productsList');
            list.innerHTML = '';
            document.getElementById('count').innerText = snap.size;
            
            snap.forEach(d => {
                const data = d.data();
                list.innerHTML += `
                    <div class="product-item">
                        <div style="display:flex; align-items:center; gap:10px;">
                            <img src="${data.f}" style="width:40px; height:40px; border-radius:5px;">
                            <div><b>${data.n}</b><br><small>${data.p}</small></div>
                        </div>
                        <button class="del-btn" onclick="window.del('${d.id}')">X</button>
                    </div>`;
            });
        }

        window.del = async (id) => {
            if(confirm("Ù…Ø³Ø­ØŸ")) { await deleteDoc(doc(db, "products", id)); loadProducts(); }
        }
    </script>
</body>
</html>
